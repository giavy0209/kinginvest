<%
    var sub_title = getData('sub_title')
    var show_sub_title = getData('show_sub_title')
    var title = getData('title')
    var show_title = getData('show_title')
    var block = getData('block')
%>
<div data-id="<%=data.id%>" id="block4" class="block">
    <div class="kdg-container">
        <div class="block-title text-c">
            <%if(show_sub_title){%>
                <p><%=sub_title%></p>    
            <%}%>
            <%if(show_title){%>
                <h2><%=title%></h2>    
            <%}%>
        </div>
        <div class="kdg-row kdg-column-3 maincontent">
            <%block.forEach(el=> {%>
                <div class="item">
                    <div class="img img-3-2">
                        <img src="<%=el.img_url%>" alt="">
                        <a href="<%=el.target_url%>"><%=el.button_text%></a>
                    </div>
                    <h4 class="title"><%=el.title%></h4>
                    <p class="des"><%=el.short_description%></p>
                </div>
            <%})%>
        </div>
    </div>
</div>

<script>
    function add3Dots(string, limit){
    var dots = "...";
    if(string.length > limit){
        string = string.substring(0,limit) + dots;
    }
    return string;
}

Array.from(document.querySelectorAll('#block4 .des')).forEach(function(el){
    console.log(el);
    el.innerText = add3Dots(el.innerText , 100)
})

</script>
